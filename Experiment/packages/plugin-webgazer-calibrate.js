var jsPsychWebgazerCalibrate=function(e){"use strict";function i(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t={name:"webgazer-calibrate",parameters:{calibration_points:{type:e.ParameterType.INT,default:[[10,10],[10,50],[10,90],[50,10],[50,50],[50,90],[90,10],[90,50],[90,90]],array:!0},calibration_mode:{type:e.ParameterType.SELECT,options:["click","view"],default:"click"},point_size:{type:e.ParameterType.INT,default:20},repetitions_per_point:{type:e.ParameterType.INT,default:1},randomize_calibration_order:{type:e.ParameterType.BOOL,default:!1},time_to_saccade:{type:e.ParameterType.INT,default:1e3},time_per_point:{type:e.ParameterType.INT,default:1e3}}},n=function(){function e(i){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=i}var t,n,a;return t=e,(n=[{key:"trial",value:function(e,i){var t=this;e.innerHTML="\n          <div id='webgazer-calibrate-container' style='position: relative; width:100vw; height:100vh'>\n          </div>";var n=e.querySelector("#webgazer-calibrate-container"),a=0,r=-1,o=null,c=function(){o=i.randomize_calibration_order?t.jsPsych.randomization.shuffle(i.calibration_points):i.calibration_points,r=-1,s()},s=function(){if(++r==o.length)++a==i.repetitions_per_point?p():c();else{var e=o[r];l(e)}},l=function(e){var a='<div id="calibration-point" style="width:'.concat(i.point_size,"px; height:").concat(i.point_size,"px; border-radius:").concat(i.point_size,"px; border: 1px solid #000; background-color: #13eb5e; position: absolute; left:").concat(e[0],"%; top:").concat(e[1],'%;"></div>');n.innerHTML=a;var r=n.querySelector("#calibration-point");if("click"==i.calibration_mode&&(r.style.cursor="pointer",r.addEventListener("click",(function(){s()}))),"view"==i.calibration_mode){var o=r.getBoundingClientRect(),c=o.left+o.width/2,l=o.top+o.height/2,p=performance.now()+i.time_to_saccade,u=performance.now()+i.time_to_saccade+i.time_per_point;requestAnimationFrame((function e(){performance.now()>p&&t.jsPsych.extensions.webgazer.calibratePoint(c,l,"click"),performance.now()<u?requestAnimationFrame(e):s()}))}},p=function(){"click"==i.calibration_mode&&t.jsPsych.extensions.webgazer.stopMouseCalibration(),n.innerHTML="",u()},u=function(){t.jsPsych.extensions.webgazer.pause(),t.jsPsych.extensions.webgazer.hidePredictions(),t.jsPsych.extensions.webgazer.hideVideo(),t.jsPsych.pluginAPI.clearAllTimeouts(),e.innerHTML="",t.jsPsych.finishTrial({})};t.jsPsych.extensions.webgazer.resume(),"click"==i.calibration_mode&&t.jsPsych.extensions.webgazer.startMouseCalibration(),c()}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();return n.info=t,n}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map